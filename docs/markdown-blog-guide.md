# マークダウンブログシステム 使用ガイド

このドキュメントでは、ポートフォリオサイトに実装されているマークダウンベースのブログシステムの使用方法について詳しく説明します。

## 目次

- [記事ファイルの作成](#記事ファイルの作成)
- [フロントマターの設定](#フロントマターの設定)
- [マークダウン記法のヒント](#マークダウン記法のヒント)
- [目次の活用方法](#目次の活用方法)
- [画像の追加](#画像の追加)
- [コードブロックの使用](#コードブロックの使用)
- [記事のプレビューと公開](#記事のプレビューと公開)
- [トラブルシューティング](#トラブルシューティング)

## 記事ファイルの作成

新しいブログ記事を作成するには、以下の手順に従います：

1. `article/contents/` ディレクトリに新しい `.md` ファイルを作成します
2. ファイル名はURLのスラッグになるため、半角英数字とハイフンのみを使用します（例: `next-js-blog-guide.md`）
3. ファイル名に日付を含める必要はありません（公開日はフロントマターで設定します）

例：

```
article/contents/my-first-blog-post.md
```

## フロントマターの設定

各記事ファイルの先頭には、記事のメタデータを定義するフロントマターを記述する必要があります。
フロントマターは3つのハイフン `---` で囲まれたYAML形式のブロックです。

基本的なフロントマターの例：

```yaml
---
title: "Next.jsでマークダウンブログを作成する方法"
emoji: "📝"
excerpt: "Next.jsとマークダウンを使用したブログシステムの構築方法を解説します。"
topics: ["Next.js", "Markdown", "React", "TypeScript"]
published: true
published_at: "2023-03-22"
---
```

### 必須フィールド

| フィールド     | 説明                     | 例                                            |
| -------------- | ------------------------ | --------------------------------------------- |
| `title`        | 記事のタイトル           | `"Next.jsでマークダウンブログを作成する方法"` |
| `published_at` | 公開日（YYYY-MM-DD形式） | `"2023-03-22"`                                |

### オプションフィールド

| フィールド   | 説明                                             | 例                                                                        |
| ------------ | ------------------------------------------------ | ------------------------------------------------------------------------- |
| `excerpt`    | 記事の要約（一覧表示用）                         | `"Next.jsとマークダウンを使用したブログシステムの構築方法を解説します。"` |
| `topics`     | トピックタグの配列                               | `["Next.js", "Markdown", "React"]`                                        |
| `emoji`      | 記事を表すアイコン（カバー画像がない場合に表示） | `"📝"`                                                                    |
| `coverImage` | カバー画像のURL                                  | `"/images/blog/markdown-blog.jpg"`                                        |
| `published`  | 公開状態（デフォルトはtrue）                     | `false`（下書き状態の場合）                                               |

### 公開スケジュール

`published_at` に未来の日付を設定すると、その日付まで記事は公開されません。これにより、記事の公開を事前にスケジュールすることができます。

例えば、現在が2023年3月1日で、以下のように設定した場合：

```yaml
published_at: "2023-03-15"
```

この記事は3月15日まで公開されません。ただし、開発環境では常に表示されます。

## マークダウン記法のヒント

記事の本文は標準的なマークダウン記法で記述します。以下に主な記法を示します：

### 見出し

```markdown
# 見出し1（h1）

## 見出し2（h2）

### 見出し3（h3）

#### 見出し4（h4）
```

> 注意: 記事タイトルは自動的にh1として扱われるため、記事本文では見出しレベルはh2（##）から始めることをお勧めします。

### テキスト装飾

```markdown
**太字**
_イタリック_
~~取り消し線~~
`インラインコード`
```

### リスト

```markdown
- 箇条書きリスト1
- 箇条書きリスト2
  - ネストしたリスト

1. 番号付きリスト1
2. 番号付きリスト2
```

### リンク

```markdown
[リンクテキスト](https://example.com)
```

### 引用

```markdown
> これは引用文です。
> 複数行にまたがることもできます。
```

### 水平線

```markdown
---
```

## 目次の活用方法

記事内の見出し（h2, h3, h4など）は自動的に検出され、目次が生成されます。モバイル表示では右上のハンバーガーメニューから目次を表示でき、デスクトップ表示では右側のサイドバーに常時表示されます。

効果的な目次のために：

1. 論理的な見出し構造を使用する（h2 → h3 → h4）
2. 見出しのレベルをスキップしない（h2の後にh4を使用しないなど）
3. 同じ見出しテキストを複数箇所で使用しない（IDの衝突を避けるため）

## 画像の追加

画像はマークダウン記法で追加できます：

```markdown
![代替テキスト](/images/blog/example-image.jpg)
```

### 画像配置のベストプラクティス

1. ブログ画像は `public/images/blog/` ディレクトリに配置する
2. ファイル名は英数字とハイフンのみを使用する
3. 適切なサイズに最適化する（推奨最大幅: 1200px）
4. WebP形式を使用して画像サイズを削減する

### カバー画像

記事のカバー画像を設定するには、フロントマターに `coverImage` プロパティを追加します：

```yaml
coverImage: "/images/blog/next-js-markdown.webp"
```

カバー画像が設定されていない場合は、`emoji` が代わりに表示されます。

## コードブロックの使用

コードブロックはバッククォート3つで囲み、言語を指定することでシンタックスハイライトが適用されます：

````markdown
```javascript
function hello() {
  console.log("Hello, world!");
}
```
````

### サポートされている言語

- javascript, jsx, typescript, tsx
- html, css, scss
- python, ruby, go
- bash, shell
- json, yaml
- markdown
- その他主要な言語

## 記事のプレビューと公開

### ローカルでのプレビュー

記事を作成したら、開発サーバーで表示をプレビューできます：

```bash
npm run dev
# または
yarn dev
```

ブラウザで http://localhost:3000/blog/[スラッグ名] にアクセスして記事を確認します。

### 公開前のチェックリスト

- [ ] フロントマターに必須項目がすべて入力されている
- [ ] マークダウン記法に誤りがない
- [ ] 画像が適切に表示される
- [ ] コードブロックのシンタックスハイライトが正しく適用されている
- [ ] 見出し構造が論理的である
- [ ] 記事の冒頭に適切な導入文がある
- [ ] スペルや文法のチェックが完了している

### デプロイと公開

記事の準備ができたら、変更をコミットしてプッシュします：

```bash
git add .
git commit -m "Add new blog post: [記事タイトル]"
git push
```

Vercelなどの継続的デプロイメントが設定されている場合、自動的にサイトが更新されます。

## トラブルシューティング

### 記事が表示されない場合

1. `published` が `false` になっていないか確認する
2. `published_at` が未来の日付になっていないか確認する
3. ファイル名（スラッグ）に特殊文字や全角文字が含まれていないか確認する
4. フロントマターの構文に誤りがないか確認する（引用符の不足など）

### 目次が正しく生成されない場合

1. 見出し構造を確認する（h1 → h2 → h3 の順になっているか）
2. 特殊文字や絵文字を含む見出しを単純化してみる
3. 同一テキストの見出しが複数ないか確認する

### 画像が表示されない場合

1. 画像パスが正しいか確認する（`/images/blog/...` で始まるか）
2. 画像ファイルが `public` ディレクトリ内の正しい場所にあるか確認する
3. 画像ファイル名に空白や特殊文字が含まれていないか確認する

### その他の問題

その他の問題が発生した場合は、以下を試してください：

1. 開発サーバーを再起動する
2. `.next` ディレクトリを削除して再ビルドする
3. 記事ファイルの文字コードが UTF-8 になっているか確認する
